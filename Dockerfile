FROM base/archlinux
MAINTAINER Andrea Brancaleoni <miwaxe@gmail.com>

RUN pacman-key --init
# FIX: https://www.reddit.com/r/linux4noobs/comments/3l6b2m/arch_error_key_seblu_sebluseblunet_could_not_be/
RUN pacman-key -r 2072D77A && pacman-key -r 498E9CEE && pacman-key -r B02854ED753E0F1F
# Update the system
RUN pacman -Syyu --noconfirm && pacman-db-upgrade

# Install Archstrike
RUN pacman-key -r F32D93DA && pacman-key --lsign-key F32D93DA
RUN printf '[multilib]\nInclude = /etc/pacman.d/mirrorlist\n\n[archstrike]\nServer = https://mirror.archstrike.org/$arch/$repo\n' >> /etc/pacman.conf
RUN pacman -Syy
